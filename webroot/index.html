<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
   "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>node-channel</title>
	<link type="text/css" rel="stylesheet" href="css/screen.css">

	<script type="text/javascript" src="js/dep/jquery.js"></script>
	<script type="text/javascript" src="js/lib/jquery.node-channel.js"></script>
	<script type="text/javascript">
	$(function() {
		var channel = $.nodeChannel.connect('http://localhost:8000/foobar');

		channel.since = 0;

		channel.addListener('date', function(str) {
			$('p').text(str);
		});

		channel.addListener('message', function(str) {
			$('<li/>').text(str).appendTo('ul');
		});

		channel.listen(0);

		$('#message').keypress(function(e) {
			var $this = $(this);
			if (e.keyCode == 13) {
				channel.emit('message', $this.val());
				$this.val('');
			}
		});
	});
	</script>
</head>
<body>
	<h1>Server time</h1>
	<p>Loading ...</p>
	<h1>Chat</h1>
	<input id="message" type="text">
	<button>Send</button>
	<ul id="chat"></ul>
</body>
</html>